"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var Slider=function(){function e(t){var i=t.bodySelector,n=t.imgsWindowSelector,s=t.imgsInnerSelector,r=t.articleTitlesSelector,o=t.articleTextsSelector,c=t.articleLinksSelector,l=t.prevBtnSelector,a=t.nextBtnSelector,h=t.activeClass,d=t.slideTime;_classCallCheck(this,e),this.body=document.querySelector(".".concat(i)),this.imgsWindow=document.querySelector(".".concat(n)),this.imgsInner=document.querySelector(".".concat(s)),this.imgs=document.querySelectorAll(".".concat(s," img")),this.articleTitles=document.querySelectorAll(".".concat(r)),this.articleTexts=document.querySelectorAll(".".concat(o)),this.articleLinks=document.querySelectorAll(".".concat(c)),this.prevBtn=document.querySelector(".".concat(l)),this.nextBtn=document.querySelector(".".concat(a)),this.activeClass=h,this.slideTime=1e3*d,this.currentSlide=0,this.imgsWindowWidth,this.offsetPatterns,this.slideTimer,this.windowWidth=document.documentElement.clientWidth,this.posInit,this.posX1,this.posX2,this.posFinal,this.posThreshold}return _createClass(e,[{key:"calcImgsWindowWidth",value:function(){this.imgsWindowWidth=this.imgsWindow.clientWidth,this.posThreshold=.2*this.imgsWindowWidth}},{key:"setImgsWidth",value:function(){var e=this;this.imgs.forEach((function(t){t.style.width="".concat(e.imgsWindowWidth,"px")}))}},{key:"calcOffset",value:function(){var e=this,t=0;this.offsetPatterns=[0],this.imgs.forEach((function(){t+=e.imgsWindowWidth,e.offsetPatterns.push(t)})),this.imgsInner.style.width="".concat(this.offsetPatterns.pop(),"px")}},{key:"checkSlide",value:function(){this.currentSlide>=this.imgs.length?this.currentSlide=0:this.currentSlide<0&&(this.currentSlide=this.imgs.length-1)}},{key:"changeContent",value:function(e){var t=this;e.forEach((function(e){e.classList.remove(t.activeClass)})),e[this.currentSlide].classList.add(this.activeClass)}},{key:"setTransform",value:function(e){this.imgsInner.style.transform="translateX(-".concat(e,"px)")}},{key:"changeSlide",value:function(){this.checkSlide(),this.setTransform(this.offsetPatterns[this.currentSlide]),this.changeContent(this.articleTitles),this.changeContent(this.articleTexts),this.changeContent(this.articleLinks),this.intervaledChangeStart(this.slideTime)}},{key:"showNextSlide",value:function(){this.currentSlide+=1,this.changeSlide()}},{key:"showPrevSlide",value:function(){this.currentSlide-=1,this.changeSlide()}},{key:"intervaledChangeStop",value:function(){clearInterval(this.slideTimer)}},{key:"intervaledChangeStart",value:function(){var e=this;this.intervaledChangeStop(),this.slideTimer=setTimeout((function(){return e.showNextSlide()}),this.slideTime)}},{key:"setMouseEnterListener",value:function(){var e=this;this.body.addEventListener("pointerenter",(function(){e.intervaledChangeStop()}))}},{key:"setMouseLeaveListener",value:function(){var e=this;this.body.addEventListener("pointerleave",(function(){e.intervaledChangeStart()}))}},{key:"setSwipeListeners",value:function(){var e=this;this.imgsWindow.addEventListener("touchstart",(function(t){e.posX2=e.offsetPatterns[e.currentSlide],e.intervaledChangeStop(),e.posInit=e.posX1=t.touches[0].clientX,e.imgsInner.style.transition="0s"})),this.imgsWindow.addEventListener("touchmove",(function(t){0==e.currentSlide&&e.posInit<e.posX1||e.currentSlide==e.imgs.length-1&&e.posInit>e.posX1?e.setTransform(e.offsetPatterns[e.currentSlide]):(e.intervaledChangeStop(),e.posX2+=e.posX1-t.touches[0].clientX,e.posX1=t.touches[0].clientX,e.imgsInner.style.transform="translateX(-".concat(e.posX2,"px)"))})),this.imgsWindow.addEventListener("touchend",(function(){e.posFinal=e.posInit-e.posX1,e.imgsInner.style.transition="",e.intervaledChangeStart(),Math.abs(e.posFinal)>e.posThreshold&&(e.posInit<e.posX1?e.currentSlide--:e.posInit>e.posX1&&e.currentSlide++),e.posInit!==e.posX1&&e.changeSlide()}))}},{key:"setResizeListener",value:function(){var e=this;window.addEventListener("resize",(function(){document.documentElement.clientWidth!=e.windowWidth&&(e.calcImgsWindowWidth(),e.setImgsWidth(),e.calcOffset(),e.changeSlide(),e.windowWidth=document.documentElement.clientWidth)}))}},{key:"setBtnsListeners",value:function(){var e=this;this.prevBtn.addEventListener("click",(function(){return e.showPrevSlide()})),this.nextBtn.addEventListener("click",(function(){return e.showNextSlide()}))}},{key:"init",value:function(){this.calcImgsWindowWidth(),this.setImgsWidth(),this.calcOffset(),this.changeSlide(),this.setResizeListener(),this.setMouseEnterListener(),this.setMouseLeaveListener(),this.setSwipeListeners(),this.setBtnsListeners()}}]),e}();document.addEventListener("DOMContentLoaded",(function(){new Slider({bodySelector:"js_slider-body",imgsWindowSelector:"js_slider-img-window",imgsInnerSelector:"js_slider-img-inner",articleTitlesSelector:"js_slider-title",articleTextsSelector:"js_slider-text",articleLinksSelector:"js_slider-link",prevBtnSelector:"js_slider-btn-prev",nextBtnSelector:"js_slider-btn-next",activeClass:"slider__active",slideTime:12}).init()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6WyJTbGlkZXIiLCJfcmVmIiwiYm9keVNlbGVjdG9yIiwiaW1nc1dpbmRvd1NlbGVjdG9yIiwiaW1nc0lubmVyU2VsZWN0b3IiLCJhcnRpY2xlVGl0bGVzU2VsZWN0b3IiLCJhcnRpY2xlTGlua3NTZWxlY3RvciIsInByZXZCdG5TZWxlY3RvciIsIm5leHRCdG5TZWxlY3RvciIsImFjdGl2ZUNsYXNzIiwic2xpZGVUaW1lIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYXJ0aWNsZVRleHRzIiwiZG9jdW1lbnQiLCJjb25jYXQiLCJhcnRpY2xlVGV4dHNTZWxlY3RvciIsImFydGljbGVMaW5rcyIsInByZXZCdG4iLCJib2R5IiwiaW1nc1dpbmRvdyIsImltZ3NJbm5lciIsImFydGljbGVUaXRsZXMiLCJuZXh0QnRuIiwiY2xpZW50V2lkdGgiLCJjdXJyZW50U2xpZGUiLCJpbWdzV2luZG93V2lkdGgiLCJvZmZzZXRQYXR0ZXJucyIsInBvc1gxIiwicG9zWDIiLCJfdGhpcyIsImltZ3MiLCJmb3JFYWNoIiwiaW1nIiwic3R5bGUiLCJ3aWR0aCIsInBvc1RocmVzaG9sZCIsIndpZHRoU3VtIiwiX3RoaXMyIiwicHVzaCIsInBvcCIsImxlbmd0aCIsImVsZW1lbnRzQXJyYXkiLCJlbGVtIiwiY2xhc3NMaXN0IiwiYWRkIiwidHJhbnNmb3JtIiwicHgiLCJjaGVja1NsaWRlIiwic2V0VHJhbnNmb3JtIiwiY2hhbmdlQ29udGVudCIsImNoYW5nZVNsaWRlIiwiY2xlYXJJbnRlcnZhbCIsImludGVydmFsZWRDaGFuZ2VTdGFydCIsImludGVydmFsZWRDaGFuZ2VTdG9wIiwic2xpZGVUaW1lciIsInNldFRpbWVvdXQiLCJfdGhpczQiLCJzaG93TmV4dFNsaWRlIiwiX3RoaXM1IiwiX3RoaXM2IiwiX3RoaXM3IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwb3NJbml0IiwidG91Y2hlcyIsImNsaWVudFgiLCJwb3NGaW5hbCIsIk1hdGgiLCJ0cmFuc2l0aW9uIiwiX3RoaXM4Iiwid2luZG93IiwiZG9jdW1lbnRFbGVtZW50Iiwid2luZG93V2lkdGgiLCJjYWxjSW1nc1dpbmRvd1dpZHRoIiwic2V0SW1nc1dpZHRoIiwiY2FsY09mZnNldCIsIl90aGlzOSIsInNob3dQcmV2U2xpZGUiLCJzZXRSZXNpemVMaXN0ZW5lciIsInNldE1vdXNlRW50ZXJMaXN0ZW5lciIsInNldE1vdXNlTGVhdmVMaXN0ZW5lciIsInNldFN3aXBlTGlzdGVuZXJzIiwic2V0QnRuc0xpc3RlbmVycyIsImluaXQiXSwibWFwcGluZ3MiOiJBQUFBLDBjQUVNQSxrQkFDSixTQUFBQSxFQUFBQyxHQVdHLElBVkRDLEVBVUNELEVBVkRDLGFBQ0FDLEVBU0NGLEVBVERFLG1CQUNBQyxFQVFDSCxFQVJERyxrQkFDQUMsRUFPQ0osRUFQREksc0JBTEVMLEVBWURDLEVBWkNELHFCQUNKTSxFQVdHTCxFQVhISyxxQkFXR0MsRUFBQU4sRUFBQU0sZ0JBQUFDLEVBQUFQLEVBQUFPLGdCQUFBQyxFQUFBUixFQUFBUSxZQUFBQyxFQUFBVCxFQUFBUyxVQUFBQyxnQkFBQUMsS0FBQVosR0FBQVksS0FMRE4sS0FBQUEsU0FBQUEsY0FBQUEsSUFBQUEsT0FBQUEsSUFLQ00sS0FKREwsV0FBQUEsU0FBQUEsY0FBQUEsSUFBQUEsT0FJQ0osSUFBQVMsS0FIREosVUFBQUEsU0FHQ0ssY0FIREwsSUFBQUEsT0FHQ0osSUFBQVEsS0FGREgsS0FBQUEsU0FFQ0ssaUJBRkRMLElBQUFBLE9BRUNMLEVBRkRLLFNBRUNHLEtBRERGLGNBQUFBLFNBQ0NJLGlCQURESixJQUFBQSxPQUNDTCxJQU1ETyxLQUFLRyxhQUFlQyxTQUFTRixpQkFBVCxJQUFBRyxPQUE4QkMsSUFOakROLEtBQUFPLGFBQUFILFNBQUFGLGlCQUFBLElBQUFHLE9BQUFYLElBUURNLEtBQUtRLFFBQVVKLFNBQVNILGNBQVQsSUFBQUksT0FBMkJWLElBUDFDSyxL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RSw0QkEvQkpyRSxTQWZEZ0QsaUJBQUEsb0JBQUEsV0FnQkQsSUFBQWhFLE9BQUEsQ0FvQ0NFLGFBQWMsaUJBQ2RDLG1CQUFvQix1QkFDcEJDLGtCQXBDRixzQkFBb0JDLHNCQUFBLGtCQXNDbEJhLHFCQUFzQixpQkFyQ3RCdUQscUJBQU9ULGlCQUNMekQsZ0JBQWFtRSxxQkFDWGxFLGdCQUFLb0UscUJBdUNUbkUsWUFBYSxpQkF0Q1RDLFVBQUEsS0EwQ0s0RSIsImZpbGUiOiJzbGlkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jbGFzcyBTbGlkZXIge1xyXG4gIGNvbnN0cnVjdG9yKHtcclxuICAgIGJvZHlTZWxlY3RvcixcclxuICAgIGltZ3NXaW5kb3dTZWxlY3RvcixcclxuICAgIGltZ3NJbm5lclNlbGVjdG9yLFxyXG4gICAgYXJ0aWNsZVRpdGxlc1NlbGVjdG9yLFxyXG4gICAgYXJ0aWNsZVRleHRzU2VsZWN0b3IsXHJcbiAgICBhcnRpY2xlTGlua3NTZWxlY3RvcixcclxuICAgIHByZXZCdG5TZWxlY3RvcixcclxuICAgIG5leHRCdG5TZWxlY3RvcixcclxuICAgIGFjdGl2ZUNsYXNzLFxyXG4gICAgc2xpZGVUaW1lLFxyXG4gIH0pIHtcclxuICAgIHRoaXMuYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2JvZHlTZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMuaW1nc1dpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2ltZ3NXaW5kb3dTZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMuaW1nc0lubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW1nc0lubmVyU2VsZWN0b3J9YCk7XHJcbiAgICB0aGlzLmltZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtpbWdzSW5uZXJTZWxlY3Rvcn0gaW1nYCk7XHJcbiAgICB0aGlzLmFydGljbGVUaXRsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHthcnRpY2xlVGl0bGVzU2VsZWN0b3J9YCk7XHJcbiAgICB0aGlzLmFydGljbGVUZXh0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2FydGljbGVUZXh0c1NlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5hcnRpY2xlTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHthcnRpY2xlTGlua3NTZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMucHJldkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3ByZXZCdG5TZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMubmV4dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke25leHRCdG5TZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMuYWN0aXZlQ2xhc3MgPSBhY3RpdmVDbGFzcztcclxuICAgIHRoaXMuc2xpZGVUaW1lID0gc2xpZGVUaW1lICogMTAwMDtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRTbGlkZSA9IDA7XHJcbiAgICB0aGlzLmltZ3NXaW5kb3dXaWR0aDtcclxuICAgIHRoaXMub2Zmc2V0UGF0dGVybnM7XHJcbiAgICB0aGlzLnNsaWRlVGltZXI7XHJcbiAgICB0aGlzLndpbmRvd1dpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgdGhpcy5wb3NJbml0O1xyXG4gICAgdGhpcy5wb3NYMTtcclxuICAgIHRoaXMucG9zWDI7XHJcbiAgICB0aGlzLnBvc0ZpbmFsO1xyXG4gICAgdGhpcy5wb3NUaHJlc2hvbGQ7XHJcbiAgfVxyXG5cclxuICBjYWxjSW1nc1dpbmRvd1dpZHRoKCkge1xyXG4gICAgdGhpcy5pbWdzV2luZG93V2lkdGggPSB0aGlzLmltZ3NXaW5kb3cuY2xpZW50V2lkdGg7XHJcbiAgICB0aGlzLnBvc1RocmVzaG9sZCA9IHRoaXMuaW1nc1dpbmRvd1dpZHRoICogMC4yMDtcclxuICB9XHJcblxyXG4gIHNldEltZ3NXaWR0aCgpIHtcclxuICAgIHRoaXMuaW1ncy5mb3JFYWNoKChpbWcpID0+IHtcclxuICAgICAgaW1nLnN0eWxlLndpZHRoID0gYCR7dGhpcy5pbWdzV2luZG93V2lkdGh9cHhgO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjYWxjT2Zmc2V0KCkge1xyXG4gICAgbGV0IHdpZHRoU3VtID0gMDtcclxuICAgIHRoaXMub2Zmc2V0UGF0dGVybnMgPSBbMF07XHJcblxyXG4gICAgdGhpcy5pbWdzLmZvckVhY2goKCkgPT4ge1xyXG4gICAgICB3aWR0aFN1bSArPSB0aGlzLmltZ3NXaW5kb3dXaWR0aDtcclxuICAgICAgdGhpcy5vZmZzZXRQYXR0ZXJucy5wdXNoKHdpZHRoU3VtKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuaW1nc0lubmVyLnN0eWxlLndpZHRoID0gYCR7dGhpcy5vZmZzZXRQYXR0ZXJucy5wb3AoKX1weGA7XHJcblxyXG4gIH1cclxuXHJcbiAgY2hlY2tTbGlkZSgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRTbGlkZSA+PSB0aGlzLmltZ3MubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudFNsaWRlID0gMDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50U2xpZGUgPCAwKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudFNsaWRlID0gdGhpcy5pbWdzLmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VDb250ZW50KGVsZW1lbnRzQXJyYXkpIHtcclxuICAgIGVsZW1lbnRzQXJyYXkuZm9yRWFjaCgoZWxlbSkgPT4ge1xyXG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5hY3RpdmVDbGFzcyk7XHJcbiAgICB9KTtcclxuICAgIGVsZW1lbnRzQXJyYXlbdGhpcy5jdXJyZW50U2xpZGVdLmNsYXNzTGlzdC5hZGQodGhpcy5hY3RpdmVDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBzZXRUcmFuc2Zvcm0ocHgpIHtcclxuICAgIHRoaXMuaW1nc0lubmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3B4fXB4KWA7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VTbGlkZSgpIHtcclxuICAgIHRoaXMuY2hlY2tTbGlkZSgpO1xyXG4gICAgdGhpcy5zZXRUcmFuc2Zvcm0odGhpcy5vZmZzZXRQYXR0ZXJuc1t0aGlzLmN1cnJlbnRTbGlkZV0pO1xyXG5cclxuICAgIHRoaXMuY2hhbmdlQ29udGVudCh0aGlzLmFydGljbGVUaXRsZXMpO1xyXG4gICAgdGhpcy5jaGFuZ2VDb250ZW50KHRoaXMuYXJ0aWNsZVRleHRzKTtcclxuICAgIHRoaXMuY2hhbmdlQ29udGVudCh0aGlzLmFydGljbGVMaW5rcyk7XHJcblxyXG4gICAgdGhpcy5pbnRlcnZhbGVkQ2hhbmdlU3RhcnQodGhpcy5zbGlkZVRpbWUpO1xyXG4gIH1cclxuXHJcbiAgc2hvd05leHRTbGlkZSgpIHtcclxuICAgIHRoaXMuY3VycmVudFNsaWRlICs9IDE7XHJcbiAgICB0aGlzLmNoYW5nZVNsaWRlKCk7XHJcbiAgfVxyXG5cclxuICBzaG93UHJldlNsaWRlKCkge1xyXG4gICAgdGhpcy5jdXJyZW50U2xpZGUgLT0gMTtcclxuICAgIHRoaXMuY2hhbmdlU2xpZGUoKTtcclxuICB9XHJcblxyXG4gIGludGVydmFsZWRDaGFuZ2VTdG9wKCkge1xyXG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNsaWRlVGltZXIpO1xyXG4gIH1cclxuXHJcbiAgaW50ZXJ2YWxlZENoYW5nZVN0YXJ0KCkge1xyXG4gICAgdGhpcy5pbnRlcnZhbGVkQ2hhbmdlU3RvcCgpO1xyXG4gICAgdGhpcy5zbGlkZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnNob3dOZXh0U2xpZGUoKSwgdGhpcy5zbGlkZVRpbWUpO1xyXG4gIH1cclxuXHJcbiAgc2V0TW91c2VFbnRlckxpc3RlbmVyKCkge1xyXG4gICAgdGhpcy5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJlbnRlcicsICgpID0+IHtcclxuICAgICAgdGhpcy5pbnRlcnZhbGVkQ2hhbmdlU3RvcCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRNb3VzZUxlYXZlTGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLmludGVydmFsZWRDaGFuZ2VTdGFydCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRTd2lwZUxpc3RlbmVycygpIHtcclxuICAgIHRoaXMuaW1nc1dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHtcclxuICAgICAgdGhpcy5wb3NYMiA9IHRoaXMub2Zmc2V0UGF0dGVybnNbdGhpcy5jdXJyZW50U2xpZGVdO1xyXG5cclxuICAgICAgdGhpcy5pbnRlcnZhbGVkQ2hhbmdlU3RvcCgpO1xyXG4gICAgICB0aGlzLnBvc0luaXQgPSB0aGlzLnBvc1gxID0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcblxyXG4gICAgICB0aGlzLmltZ3NJbm5lci5zdHlsZS50cmFuc2l0aW9uID0gJzBzJztcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuaW1nc1dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZSkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5jdXJyZW50U2xpZGUgPT0gMCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvc0luaXQgPCB0aGlzLnBvc1gxKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFRyYW5zZm9ybSh0aGlzLm9mZnNldFBhdHRlcm5zW3RoaXMuY3VycmVudFNsaWRlXSk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5jdXJyZW50U2xpZGUgPT0gdGhpcy5pbWdzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICBpZiAodGhpcy5wb3NJbml0ID4gdGhpcy5wb3NYMSkge1xyXG4gICAgICAgICAgdGhpcy5zZXRUcmFuc2Zvcm0odGhpcy5vZmZzZXRQYXR0ZXJuc1t0aGlzLmN1cnJlbnRTbGlkZV0pO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5pbnRlcnZhbGVkQ2hhbmdlU3RvcCgpO1xyXG5cclxuICAgICAgdGhpcy5wb3NYMiArPSB0aGlzLnBvc1gxIC0gZS50b3VjaGVzWzBdLmNsaWVudFg7XHJcbiAgICAgIHRoaXMucG9zWDEgPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcclxuXHJcbiAgICAgIHRoaXMuaW1nc0lubmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3RoaXMucG9zWDJ9cHgpYDtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuaW1nc1dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcclxuICAgICAgdGhpcy5wb3NGaW5hbCA9IHRoaXMucG9zSW5pdCAtIHRoaXMucG9zWDE7XHJcbiAgICAgIHRoaXMuaW1nc0lubmVyLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcclxuICAgICAgdGhpcy5pbnRlcnZhbGVkQ2hhbmdlU3RhcnQoKTtcclxuXHJcbiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnBvc0ZpbmFsKSA+IHRoaXMucG9zVGhyZXNob2xkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9zSW5pdCA8IHRoaXMucG9zWDEpIHtcclxuICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlLS07XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBvc0luaXQgPiB0aGlzLnBvc1gxKSB7XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5wb3NJbml0ICE9PSB0aGlzLnBvc1gxKSB7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VTbGlkZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFJlc2l6ZUxpc3RlbmVyKCkge1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAhPSB0aGlzLndpbmRvd1dpZHRoKSB7XHJcbiAgICAgICAgdGhpcy5jYWxjSW1nc1dpbmRvd1dpZHRoKCk7XHJcbiAgICAgICAgdGhpcy5zZXRJbWdzV2lkdGgoKTtcclxuICAgICAgICB0aGlzLmNhbGNPZmZzZXQoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZVNsaWRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMud2luZG93V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0QnRuc0xpc3RlbmVycygpIHtcclxuICAgIHRoaXMucHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc2hvd1ByZXZTbGlkZSgpKTtcclxuXHJcbiAgICB0aGlzLm5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnNob3dOZXh0U2xpZGUoKSk7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5jYWxjSW1nc1dpbmRvd1dpZHRoKCk7XHJcbiAgICB0aGlzLnNldEltZ3NXaWR0aCgpO1xyXG4gICAgdGhpcy5jYWxjT2Zmc2V0KCk7XHJcbiAgICB0aGlzLmNoYW5nZVNsaWRlKCk7XHJcbiAgICB0aGlzLnNldFJlc2l6ZUxpc3RlbmVyKCk7XHJcbiAgICB0aGlzLnNldE1vdXNlRW50ZXJMaXN0ZW5lcigpO1xyXG4gICAgdGhpcy5zZXRNb3VzZUxlYXZlTGlzdGVuZXIoKTtcclxuICAgIHRoaXMuc2V0U3dpcGVMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuc2V0QnRuc0xpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICBjb25zdCBNYWluU2xpZGVyID0gbmV3IFNsaWRlcih7XHJcbiAgICBib2R5U2VsZWN0b3I6ICdqc19zbGlkZXItYm9keScsXHJcbiAgICBpbWdzV2luZG93U2VsZWN0b3I6ICdqc19zbGlkZXItaW1nLXdpbmRvdycsXHJcbiAgICBpbWdzSW5uZXJTZWxlY3RvcjogJ2pzX3NsaWRlci1pbWctaW5uZXInLFxyXG4gICAgYXJ0aWNsZVRpdGxlc1NlbGVjdG9yOiAnanNfc2xpZGVyLXRpdGxlJyxcclxuICAgIGFydGljbGVUZXh0c1NlbGVjdG9yOiAnanNfc2xpZGVyLXRleHQnLFxyXG4gICAgYXJ0aWNsZUxpbmtzU2VsZWN0b3I6ICdqc19zbGlkZXItbGluaycsXHJcbiAgICBwcmV2QnRuU2VsZWN0b3I6ICdqc19zbGlkZXItYnRuLXByZXYnLFxyXG4gICAgbmV4dEJ0blNlbGVjdG9yOiAnanNfc2xpZGVyLWJ0bi1uZXh0JyxcclxuICAgIGFjdGl2ZUNsYXNzOiAnc2xpZGVyX19hY3RpdmUnLFxyXG4gICAgc2xpZGVUaW1lOiAxMixcclxuICB9KTtcclxuXHJcbiAgTWFpblNsaWRlci5pbml0KCk7XHJcbn0pO1xyXG5cclxuIl19
