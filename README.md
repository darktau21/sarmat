# Сайт какого-то музея ЮФУ

## Оглавление

1. [Оглавление](#оглавление)
2. [Используемые средства разработки](#используемые-средства-разработки)
3. [Начало работы](#начало-работы)
   - [VS Code](#vs-code)
   - [WSL](#wsl)
   - [Загрузка проекта и установка зависимостей](#загрузка-проекта-и-установка-зависимостей)
   - [Файловая структура проекта](#файловая-структура-проекта)
   - [Основные принципы разработки](#основные-принципы-разработки)
4. [Подробнее об инструментах](#подробнее-об-инструментах)

---

## Используемые средства разработки

- [VS Code](https://code.visualstudio.com/ 'Текстовый редактор')
  - [Remote WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl 'Расширение для интеграции WSL в VS Code')
  - [GitLens](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens 'Расширение, добавляющее новые функции для работы с Git в VS Code')
  - [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode 'Форматирует код, приводя его в надлежащий вид')
- [WSL](https://docs.microsoft.com/ru-ru/windows/wsl/ 'Подсистема Linux для Windows')
  - [Git](https://git-scm.com/ 'Система контроля версий')
  - [NodeJS](https://nodejs.org/ru/ 'Окружение, позволяющее использовать JS вне браузеров')
    - [Gulp](https://gulpjs.com/ 'Таск раннер')
      - [PUG](https://pugjs.org/api/getting-started.html 'HTML препроцессор')
      - [Sass](https://sass-lang.com/ 'CSS препроцессор')
      - [Babel](https://babeljs.io/ 'JS компилятор, обеспечивающий совместимость новых версий ES со старыми браузерами')

## Начало работы

### VS Code

Объяснять, как установить [VS Code](https://code.visualstudio.com/ 'Текстовый редактор') не буду, но пару слов сказать стоит.

Во-первых, расширения, указанные в [используемых средствах разработки](#используемые-средства-разработки) очень желательно установить, все ссылки на них указаны. Вкратце про плагины. [Remote WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl 'Расширение для интеграции WSL в VS Code') необходим для более тесной интеграции [VS Code](https://code.visualstudio.com/ 'Текстовый редактор') в [WSL](https://docs.microsoft.com/ru-ru/windows/wsl/ 'Подсистема Linux для Windows'), например, для открытия линуксовской консоли и работой с файлами прямо в редоакторе. [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode 'Форматирует код, приводя его в надлежащий вид') - понятно, приводит говнокод в более-менее читаемый вид. Про работу с [GitLens](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens 'Расширение, добавляющее новые функции для работы с Git в VS Code') и его функционал расскажу позже.

Во-вторых - папка ".vscode". В ней находятся мои настройки редактора именно для этого проекта. Использовать их необязательно (эту папку можно просто удалить), но как минимум необходимо установить размер таба в 2 пробела (да, по умолчанию в [VS Code](https://code.visualstudio.com/ 'Текстовый редактор') символ таба заменяется пробелами, это связано с тем, что на разных системах размер таба разный, а пробелы везде одинаковые).

### WSL

[WSL](https://docs.microsoft.com/ru-ru/windows/wsl/ 'Подсистема Linux для Windows') (аббревиатура от Windows Substyem for Linux) - это подсистема, позволяющая запускать среду GNU/Linux и использовать большинство программ доступных в ней прямо из винды.

Установка. Если версия винды 2004 или любая Windows 11 (проверить можно нажав Win + R и введя `winver`), достаточно открыть PowerShell от имени админа, ввести `wsl --install` и перезагрузить компьютер. В противном случае ситуация сложнее. Тут порядок действий следующий:

1. Открываем PowerShell от админа.
2. Вводим `dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart`
3. Перезагружаемся, снова открываем PowerShell.
4. Вводим `dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart`
5. Перезагружаемся.
6. [Скачиваем](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi), устанавливаем, перезагружаемся.
7. Снова PowerShell, вводим `wsl --set-default-version 2`
8. [Тык](https://www.microsoft.com/store/productId/9NBLGGH4MSV6), устанавливаем.

Дальнейшие действия одинаковы вне зависимости от способа установки.

1. Запускаем Ubuntu (можно в поиске системы найти)
2. После загрузки будет такая шняга
   ![Терминал](https://i.imgur.com/FXTGJdF.png)

3. Вводим свой ник, и два раза пароль (**пароль никак не отображается, то есть вообще никак, ни чёрточек, ни точек**)
4. Вводим `sudo apt-get update && sudo apt-get upgrade`, когда попросит подтвердить, вводим `y`, жмём enter
5. Вводим `sudo apt-get install npm`, если просит подтвердить - `y` и enter
6. Теперь терминал можно закрыть, открываем [VS Code](https://code.visualstudio.com/ 'Текстовый редактор')

### Загрузка проекта и установка зависимостей

При первом открытии [VS Code](https://code.visualstudio.com/ 'Текстовый редактор') после установки [WSL](https://docs.microsoft.com/ru-ru/windows/wsl/ 'Подсистема Linux для Windows') справа должно появиться уведомление, предлагающее установить [Remote WSL](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl 'Расширение для интеграции WSL в VS Code'), если не предлагает, ставим ручками. После установки слева снизу должна появиться жёлтая кнопка, типа вот такой:

![Кнопка WSL](https://i.imgur.com/L9V3C4Y.png)

Жмём на неё, в выпадающем меню выибираем "Open folder in WSL"...

_Тут немножко отвлечемся, чтобы открыть папку подсистемы Ubuntu в Проводнике, нужно в поиске системы вбить `\\wsl$`, там уже можно просто создать ярлык, на любую из папок линУкса и поместить его на рабочий стол. Советую по пути `\\wsl$\Ubuntu\home\<ник>\` (домашняя папка пользователя) создать папку `projects` (или что-то типа того) и работать уже в ней. Я дальше везде буду ссылаться именно на эту папку._

находим папку `projects`, открываем.

Теперь качаем сам проект, вводим команду `git clone https://github.com/darktau21/sarmat.git`. После скачивания появится папка `sarmat`. Далее в терминале [VS Code](https://code.visualstudio.com/ 'Текстовый редактор') переходим в папку с проектом (`cd sarmat`) и пишем `npm i`, это установит все нужные пакеты (Типа [Gulp](https://gulpjs.com/ 'Таск раннер'), [PUG](https://pugjs.org/api/getting-started.html 'HTML препроцессор'), [Sass](https://sass-lang.com/ 'CSS препроцессор'), [Babel](https://babeljs.io/ 'JS компилятор, обеспечивающий совместимость новых версий ES со старыми браузерами')). Далее вводим `sudo npm i --global gulp-cli`. Теперь, наконец-то, можно работать.

### Файловая структура проекта

```
.
├── dist                 - папка, куда будет собираться сайт
├─┬ src                  - папка с исходниками сайта
│ ├── fonts              - папка со шрифтами
│ ├── includes           - папка с БЭМ блоками
│ ├── pages              - папка со всеми страницами
│ ├── uploads            - папка с контентными файлами*
│ └── sass               - папка с SASS файлами
├── package.json         - файл настроек Node.js
├──.browserslist         - файл, указывающий какие версии браузеров поддерживаем**
├──.gitignore            - файл, в котором указываем гиту какие файлы нужно игнорировать
└── gulpfile.js          - файл настроек Gulp
```

\* В папке `uploads` хранятся **только** те файлы (картинки, документы и т.д.), которые нужны для наполнения сайта контентом. Почему так? Это банально удобнее, например, картинки, которые нужны для дизайна самого сайта (допустим лого юфу), будет лежать где-то в отдельной папке, а здесь картинки статей, которые могут 100500 раз измениться, добавиться, удалиться. Таким образом мы исключаем удаление файлов (да тех же картинок), которые нужны именно для дизайна интерфейса

\*\* В этом файлеописаны поддерживаемые версии браузеров. Это нужно для плагинов, которые обрабатывают код. Например autoptrefixer, который мы испульзуем, ссылается на этот файл, чтобы знать, какие вендорные префиксы нужно вставлять в CSS. Такой же принцип работы и у Babel.

### Основные принципы разработки

- **Адаптивность** Максимальная отзывчивость верстки. Она не должна распадаться и съезжать при отсутвсии каких либо блоков или контента (текста, картинок). Верстка должна выглядеть вменяемо и при бОльшем количестве контента, чем задумывалось изначально (в рамках разумного конечно). Например, изначально задумано 5 пунктов меню, при добавлении 6 и 7 пункта шапка должна отреагировать вменяемо - растянуться или перенести пункты на другую строку, а не создать горизонтальный скролл, выехать за экран или наехать на следующий блок. И такие требования должны соблюдаться для всех элементов на странице. Так же не должно быть никаких проблем при изменении ширины экрана, блоки должны растягиваться, равномерно размещая контент. При сжатии - сжиматься до минимума и потом уже перестраиваться.

- **Кроссбраузерность** К сожалению, при разработчики браузеров далеко не всегда следуют официальной спецификации [W3C](https://www.w3.org/) (консорциум, который занимается поддержкой и развитием HTML и CSS, именно они решают какие HTML теги и CSS свойства добавлять в новых версиях, и именно они описывают, как это всё должно работать), поэтому одна и та же верстка в разных браузерах может выглядеть совершенно по разному, нужно стараться приводить верстку к одному виду во всех браузерах (**но в пределах разумного, идельной точности в разных браузерах добиться практически невозможно, да и в 99,9% случаев - бессмысленно**). [Тут](https://youtu.be/ANyRXCEcBUM) можно посмотреть некоторые примеры различий работы одних и тех же CSS свойств в разных браузеров и способы их пофиксить.

- **Олды тоже люди** Поддержка старых браузеров, в частности последних версий Internet Explorer. Идеальной поддержки не нужно, сайт просто должен не сыпаться. Если всё совсем плохо, то выводим плашку с просьбой зайти с более нового браузера

- **БЭМ (Блок Элемент Модификатор)** Это метолодология, согласно которой каждая страница разделяется на блоки и элементы. Именно для этого мы и используем [PUG](https://pugjs.org/api/getting-started.html 'HTML препроцессор') и [Sass](https://sass-lang.com/ 'CSS препроцессор'). Для каждого блока создаётся отдельная папка, в которой хранится всё, что с ним связано (HTML код, стили, скрипты, картинки и т.д.) и уже отдельные блоки просто подключаются к странице. Подробнее [тут](https://ru.bem.info/methodology/quick-start/) и [тут](https://youtu.be/HihYQVuH64U)

- **Mobile First** Сначала для мобилок. Верстка делается сначала под мобильные устройства, потом уже под большие размеры экранов. Усложнять простое легче, чем написать сначала сложный код, потом его обнулять и снова писать уже под мобилки. _Но не факт, что с нашим макетом этого прицнипа получится придерживаться_

- **Максимальное упрощение** В первую очередь это касается стилей. Если на макете есть текст, то и в верстке это должен быть текст (а не картинка с текстом), простейшие геометрические фигуры (кружочки квадратики, палочки) - на чистом CSS и т.д. и т.п. Думаю, принцип понятен

## Подробнее об инструментах

Есть две основные консольные команды, которые нам понадобятся: `gulp` (она же `npm run dev`) и `gulp build` (она же `npm run build`). Первая запускает веб сервер, открывает страницу в браузере, и следит за всеми изменениями фалов в автоматическом режиме для автообновления страницы в браузере. Вторая собирает проект в папку `dist`.

Теперь подробнее об инструментах. [Gulp](https://gulpjs.com/ 'Таск раннер') - таскраннер. Его задача управлять всеми остальными инструментами и следить за изменениями файлов. Например. Есть [Sass](https://sass-lang.com/ 'CSS препроцессор'). Это препроцессор, его задача компилировать код из одного синтаксиса в другой (задача [PUG](https://pugjs.org/api/getting-started.html 'HTML препроцессор'), кстати, точно такая же) и по идее каждый файл со стилями мы должны передавать вручную, то есть прописывать в консоли команду, путь до исходного файла и куда класть скомпилированный файл, но это не очень удобно. Тут в дело вступает Gulp, который следит за всеми файлами стилей и при любых изменениях автоматически, без какого либа вмешательства компилирует их и кладёт куда мы указали. И так во всём. [PUG](https://pugjs.org/api/getting-started.html 'HTML препроцессор'), [Sass](https://sass-lang.com/ 'CSS препроцессор') и JavaScript код автоматически компилируются, сжимаются, стилям добавляются [вендорные префиксы](<https://netology.ru/glossariy/vendornyy-prefiks#:~:text=%D0%92%D0%B5%D0%BD%D0%B4%D0%BE%D1%80%D0%BD%D1%8B%D0%B9%20%D0%BF%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81%20(vendor%20prefix)%20%E2%80%94,webkit%2D%20%D0%B8%D0%BB%D0%B8%20%2Dmoz%2D.>), JavaScript переводится в старый синтаксис (который куда более громостский и неудобный), который поддерживается старыми браузерами и после всего этого все файлы кладутся в папочки на выходе. Что касается картинок и шрифтов: картинки - сжимаются, удаляются метаданные (например дата съёмки, эти данные тоже занимают место), шрифты - преобразуются в различные форматы, которые поддерживают и старые и новые браузеры. Без [Gulp](https://gulpjs.com/ 'Таск раннер') все вышеперечисленные действия пришлось бы делать ручками, используя сторонние интернет-сервисы и программы.

В конфиге достаточно подробно описано, что для чего нужно и как что пишется.
